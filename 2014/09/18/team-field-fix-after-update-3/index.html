<!doctype html><html lang=en><meta charset=utf-8><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/blog.casavian.eu\/"},"articleSection":"post","name":"Team field fix after update 3","headline":"Team field fix after update 3","description":"Notes and considerations of small venetian guy on DevOps tools, architecture, development and other paraphernalia.","inLanguage":"en","author":"Giulio Vian","creator":"Giulio Vian","publisher":"Giulio Vian","accountablePerson":"Giulio Vian","copyrightHolder":"Giulio Vian","copyrightYear":"2014","datePublished":"2014-09-18T21:03:17Z","dateModified":"2014-09-18T21:03:17Z","url":"\/2014\/09\/18\/team-field-fix-after-update-3\/","wordCount":"374","keywords":["TFS 2013","TFS 2013 Update 3","Blog"]}</script><title>Team field fix after update 3 &ndash; Giulio Vian's Blog!</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="Notes and considerations of small venetian guy on DevOps tools, architecture, development and other paraphernalia."><meta name=author content="Giulio Vian"><link rel=icon href=/favicon.ico><meta itemprop=name content="Team field fix after update 3"><meta itemprop=description content="We are testing the upgrade to TFS 2013 Update 3. At first sight everything seemed working, but one reviewer, opening the Work tab to see the Backlog for her Team Project, saw this nasty TF400917 error
I realized that, a while ago, around 2012.4, we have applied Customize a team project to support team fields &nbsp;  to that Project, and Custom.Team is our custom team field.
What does Update 3?"><meta itemprop=datePublished content="2014-09-18T21:03:17+00:00"><meta itemprop=dateModified content="2014-09-18T21:03:17+00:00"><meta itemprop=wordCount content="374"><meta itemprop=keywords content="TFS 2013,TFS 2013 Update 3,"><meta property="og:title" content="Team field fix after update 3"><meta property="og:description" content="We are testing the upgrade to TFS 2013 Update 3. At first sight everything seemed working, but one reviewer, opening the Work tab to see the Backlog for her Team Project, saw this nasty TF400917 error
I realized that, a while ago, around 2012.4, we have applied Customize a team project to support team fields &nbsp;  to that Project, and Custom.Team is our custom team field.
What does Update 3?"><meta property="og:type" content="article"><meta property="og:url" content="http://blog.casavian.eu/2014/09/18/team-field-fix-after-update-3/"><meta property="article:published_time" content="2014-09-18T21:03:17+00:00"><meta property="article:modified_time" content="2014-09-18T21:03:17+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Team field fix after update 3"><meta name=twitter:description content="We are testing the upgrade to TFS 2013 Update 3. At first sight everything seemed working, but one reviewer, opening the Work tab to see the Backlog for her Team Project, saw this nasty TF400917 error
I realized that, a while ago, around 2012.4, we have applied Customize a team project to support team fields &nbsp;  to that Project, and Custom.Team is our custom team field.
What does Update 3?"><meta name=twitter:site content="@giulio_vian"><link rel=alternate href=/index.xml type=application/rss+xml title="Giulio Vian's Blog!"><link rel=stylesheet href=/css/vendor.min.95b0b4c4607aec507f0fc9d9c36a12a4613ccac06f9423caa43e265cb58eb5f90709388cc0fa166ac3ca836b4163e6d0569b8b86065d9cabdf223c5ea9a63b08.css integrity="sha512-lbC0xGB67FB/D8nZw2oSpGE8ysBvlCPKpD4mXLWOtfkHCTiMwPoWasPKg2tBY+bQVpuLhgZdnKvfIjxeqaY7CA=="><link href=http://blog.casavian.eu/css/cookieconsent.min.cd0d0b6e50ff01ff2f3a9a70d7cfb66a7c6cb9acf7a566325568be6d3bd31fc4.css rel=stylesheet type=text/css integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin=anonymous><script src=http://blog.casavian.eu/js/cookieconsent.min.e55842a856a6d829feca3c3ad736c136b6c7549e9247274f78aa296259e06e24.js integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin=anonymous async></script><script>window.addEventListener("load",function(){window.cookieconsent.initialise({"palette":{"popup":{"background":"#428bca","text":"#ffffff"},"button":{"background":"#f71559"}},"content":{"message":'This website uses cookies.',"dismiss":'Got it!',"link":'Learn more.',"href":"http:\/\/blog.casavian.eu\/page\/privacy-cookies-policy\/"},"position":"bottom-right"})});</script><body><nav class="navbar navbar-light bg-white navbar-expand-lg border-bottom"><div class=container><a class="navbar-brand text-primary" href=/>Giulio Vian's Blog!</a>
<button class="navbar-toggler collapsed" type=button data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="navbar-collapse collapse" id=navbarCollapse><ul class="navbar-nav mr-auto"><li class=nav-item><a class="nav-link text-primary" href=/index.html><i class="fas fa-home"></i>Home</a></li><li class=nav-item><a class="nav-link text-primary" href=/page/about/><i class="fa fa-info-circle"></i>About</a></li><li class=nav-item><a class="nav-link text-primary" href=/page/public-speaking><i class="fa fa-microphone"></i>Speaking</a></li></ul></div></div></nav><main role=main><div class="container mt-3 mb-3"><div class=card><div class=card-body><h1 class=card-title><a href=/2014/09/18/team-field-fix-after-update-3/>Team field fix after update 3</a></h1><h6 class="card-subtitle mb-2 text-muted"><i class="fas fa-calendar-day"></i>&nbsp;18 Sep 2014 -
<i class="fas fa-user"></i>&nbsp;Giulio Vian
- <i class="fas fa-clock"></i>&nbsp;~2 Minutes</h6><p class=card-text><p>We are testing the upgrade to TFS 2013 Update 3. At first sight everything seemed working, but one reviewer, opening the Work tab to see the Backlog for her Team Project, saw this nasty TF400917 error</p><p><img src=/images/2014-09-18_103007.png alt=TF400917></p><p>I realized that, a while ago, around 2012.4, we have applied <a href=http://msdn.microsoft.com/en-us/library/dn144940.aspx target=_blank rel="noopener noreferrer">Customize a team project to support team fields
&nbsp;<i class="fas fa-external-link-alt"></i></a> to that Project, and <code>Custom.Team</code> is our custom team field.</p><h2 id=what-does-update-3>What does Update 3?</h2><p>The major change in Update 3 is the transform of Test Plans and Suites in normal work items. Running <code>witadmin listwitd</code> shows the change</p><table><thead><tr><th>Before</th><th>After</th></tr></thead><tbody><tr><td>Bug</td><td>Bug</td></tr><tr><td>Test Case</td><td>Test Case</td></tr><tr><td>Shared Steps</td><td>Shared Steps</td></tr><tr><td>Task</td><td>Task</td></tr><tr><td>Product Backlog Item</td><td>Product Backlog Item</td></tr><tr><td>Code Review Request</td><td>Code Review Request</td></tr><tr><td>Code Review Response</td><td>Code Review Response</td></tr><tr><td>Feedback Request</td><td>Feedback Request</td></tr><tr><td>Feedback Response</td><td>Feedback Response</td></tr><tr><td>Impediment</td><td>Impediment</td></tr><tr><td>Feature</td><td>Feature</td></tr><tr><td>Shared Parameter</td><td>Shared Parameter</td></tr><tr><td>n/a</td><td>Test Plan</td></tr><tr><td>n/a</td><td>Test Suite</td></tr></tbody></table><p>As a consequence, the <strong>Test</strong> tab uses the Test Plan Category to identify the work item type to show for Test Plans.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-XML data-lang=XML><span style=color:#f92672>&lt;CATEGORY</span> <span style=color:#a6e22e>refname=</span><span style=color:#e6db74>&#34;Microsoft.TestPlanCategory&#34;</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Test Plan Category&#34;</span><span style=color:#f92672>&gt;</span>
  <span style=color:#f92672>&lt;DEFAULTWORKITEMTYPE</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Test Plan&#34;</span> <span style=color:#f92672>/&gt;</span>
<span style=color:#f92672>&lt;/CATEGORY&gt;</span>
</code></pre></div><p>Having changed the Process Configuration, also the work item type identified in the Test Plan Category must be use the Team field.</p><h2 id=no-problem-baby>No problem, baby</h2><p>So I exported the Test Plan work item type</p><pre><code>witadmin exportwitd /collection:http://tfs.test.mycompany.local:8080/tfs/DefaultCollection &quot;/p:MyProject&quot; &quot;/n:Test Plan&quot; &quot;/f:Test Plan.xml&quot;
</code></pre><p>added the Team Field</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-XML data-lang=XML>  <span style=color:#f92672>&lt;FIELD</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Team&#34;</span> <span style=color:#a6e22e>refname=</span><span style=color:#e6db74>&#34;Custom.Team&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;String&#34;</span> <span style=color:#a6e22e>reportable=</span><span style=color:#e6db74>&#34;dimension&#34;</span><span style=color:#f92672>&gt;</span>
    <span style=color:#f92672>&lt;ALLOWEDVALUES</span> <span style=color:#a6e22e>expanditems=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>&gt;</span>
      <span style=color:#f92672>&lt;GLOBALLIST</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;MyProject - Teams&#34;</span> <span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;/ALLOWEDVALUES&gt;</span>
    <span style=color:#f92672>&lt;DEFAULT</span> <span style=color:#a6e22e>from=</span><span style=color:#e6db74>&#34;value&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;ALL&#34;</span> <span style=color:#f92672>/&gt;</span>
  <span style=color:#f92672>&lt;/FIELD&gt;</span>
</code></pre></div><p>and displayed in the Status group</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-XML data-lang=XML><span style=color:#f92672>&lt;Control</span> <span style=color:#a6e22e>FieldName=</span><span style=color:#e6db74>&#34;Custom.Team&#34;</span> <span style=color:#a6e22e>Type=</span><span style=color:#e6db74>&#34;FieldControl&#34;</span> <span style=color:#a6e22e>Label=</span><span style=color:#e6db74>&#34;Team:&#34;</span> <span style=color:#a6e22e>LabelPosition=</span><span style=color:#e6db74>&#34;Left&#34;</span> <span style=color:#f92672>/&gt;</span>
</code></pre></div><h2 id=surprise>Surprise!</h2><p>Now I have another issue: all Test Plans disappeared from the <strong>Test</strong> tab!</p><p><img src=/images/2014-09-18_124821.png alt="No Test Plan available"></p><p>but the data seemed ok: Test Plan 107531 was visible before the addition of the Team field, and the value for Team seems correct.</p><p><img src=/images/2014-09-18_125506.png alt="Test Plan"></p><p>What the&mldr;</p><p>Try assign manually <code>ALL</code> and save. Aha! Now it appears. Reflecting on this, it is logical: we need to assign a value otherwise the Team field it is empty.</p><p>Launch Excel to edit the 150+ plans, edit, Publish &mldr; still not, for some reason, it does not work.</p><p>Aha! I need to remove the DEFAULT rule from the Field definition.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-XML data-lang=XML>  <span style=color:#f92672>&lt;FIELD</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;Team&#34;</span> <span style=color:#a6e22e>refname=</span><span style=color:#e6db74>&#34;Custom.Team&#34;</span> <span style=color:#a6e22e>type=</span><span style=color:#e6db74>&#34;String&#34;</span> <span style=color:#a6e22e>reportable=</span><span style=color:#e6db74>&#34;dimension&#34;</span><span style=color:#f92672>&gt;</span>
    <span style=color:#f92672>&lt;ALLOWEDVALUES</span> <span style=color:#a6e22e>expanditems=</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>&gt;</span>
      <span style=color:#f92672>&lt;GLOBALLIST</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;MyProject - Teams&#34;</span> <span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;/ALLOWEDVALUES&gt;</span>
  <span style=color:#f92672>&lt;/FIELD&gt;</span>
</code></pre></div><p>Aaahhh, finally everything works.</p></p></div><div class=card-footer><small class=text-muted><i class="fas fa-folder text-primary"></i>&nbsp;
<a href=/categories/#alm class="badge badge-primary"><span>ALM</span></a><br><i class="fas fa-tags text-secondary"></i>&nbsp;
<a href=/tags/#tfs-2013 class="badge badge-secondary"><span>TFS 2013</span></a>
<a href=/tags/#tfs-2013-update-3 class="badge badge-secondary"><span>TFS 2013 Update 3</span></a></small></div></div></div></main><footer class="navbar-light border-top"><div class=container><div class=row><div class="col-12 col-md-3 mb-3"><h5>Giulio Vian's Blog!</h5>Notes and considerations of small venetian guy on DevOps tools, architecture, development and other paraphernalia.</div><div class="col-12 col-md-3 mb-3"><h5>Social</h5><ul class="list-unstyled list-inline"><li class=list-inline-item><a href=https://github.com/giuliov target=_blank rel="noopener noreferrer" title=GitHub class="fab fa-github fa-2x"></a></li><li class=list-inline-item><a href=https://stackoverflow.com/users/100864 target=_blank rel="noopener noreferrer" title="Stack Overflow" class="fab fa-stack-overflow fa-2x"></a></li><li class=list-inline-item><a href=https://medium.com/@giuliovdev target=_blank rel="noopener noreferrer" title=Medium class="fab fa-medium fa-2x"></a></li><li class=list-inline-item><a href=https://linkedin.com/in/giuliovian target=_blank rel="noopener noreferrer" title=LinkedIn class="fab fa-linkedin fa-2x"></a></li><li class=list-inline-item><a href=https://linkedin.com/company/unum-ireland-ltd-it target=_blank rel="noopener noreferrer" title="LinkedIn Company" class="fab fa-linkedin fa-2x"></a></li><li class=list-inline-item><a href=https://xing.com/profile/Giulio_Vian target=_blank rel="noopener noreferrer" title=Xing class="fab fa-xing fa-2x"></a></li><li class=list-inline-item><a href=https://slideshare.net/giuliov target=_blank rel="noopener noreferrer" title=SlideShare class="fab fa-slideshare fa-2x"></a></li><li class=list-inline-item><a href=https://youtube.com/UCZ-J6JRyvz6aaJ9zCN5wpxA target=_blank rel="noopener noreferrer" title=YouTube class="fab fa-youtube fa-2x"></a></li><li class=list-inline-item><a href=https://twitter.com/giulio_vian target=_blank rel="noopener noreferrer" title=Twitter class="fab fa-twitter fa-2x"></a></li><li class=list-inline-item><a href=mailto:giulio.dev@casavian.eu title=Email class="fas fa-envelope fa-2x"></a></li></ul></div><div class="col-12 col-md-3 mb-3"><h5>Site</h5><ul class=list-unstyled><li><a href=/about/><i class="fas fa-address-card"></i>About</a></li><li><a href=/categories/><i class="fas fa-folder"></i>Categories</a></li><li><a href=/tags/><i class="fas fa-tags"></i>Tags</a></li></ul></div><div class="col-12 col-md-3 mb-3">&copy; 2020 Giulio Vian<br>Theme by <a href=https://www.spech.de target=_blank rel="noopener noreferrer">Sebastian Pech</a>.</div></div></div></footer><script src=/js/vendor.min.0497fa926ed3dc2241b91e016467480841da9749a0f7c40ed3960c3c238745e5accb5ec5e07654668e11047bbf96f95083b88dd49a845781011aba42e4f00a5d.js integrity="sha512-BJf6km7T3CJBuR4BZGdICEHal0mg98QO05YMPCOHReWsy17F4HZUZo4RBHu/lvlQg7iN1JqEV4EBGrpC5PAKXQ=="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-46796059-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>