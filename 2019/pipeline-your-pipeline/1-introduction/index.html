<!doctype html><html lang=en><meta charset=utf-8><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/blog.casavian.eu\/"},"articleSection":"post","name":"Meta-pipelines - Introduction","headline":"Meta-pipelines - Introduction","description":"Notes and considerations of small venetian guy on DevOps tools, architecture, development and other paraphernalia.","inLanguage":"en","author":"Giulio Vian","creator":"Giulio Vian","publisher":"Giulio Vian","accountablePerson":"Giulio Vian","copyrightHolder":"Giulio Vian","copyrightYear":"2019","datePublished":"2019-08-19T00:00:00Z","dateModified":"2019-08-19T00:00:00Z","url":"\/2019\/pipeline-your-pipeline\/1-introduction\/","wordCount":"542","keywords":["Build","Pipelines","Azure DevOps","Blog"]}</script><title>Meta-pipelines - Introduction &ndash; Giulio Vian's Blog!</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=description content="Notes and considerations of small venetian guy on DevOps tools, architecture, development and other paraphernalia."><meta name=author content="Giulio Vian"><link rel=icon href=/favicon.ico><meta itemprop=name content="Meta-pipelines - Introduction"><meta itemprop=description content="Welcome. This series of articles will go in details of automating Azure Pipelines infrastructure itself. The text is accompanied by a source code repository &nbsp;  publicly available on GitHub.
Scenario and Problems Imagine yourself in the scenario of an independent team responsible of maintaining its own build pipeline. Typical solutions are:
 Grab a leftover desktop or server machine Ask the IT department for a virtual machine Buy a VM in the cloud Use the standard hosted agents provided by Azure Pipelines  These solutions share some common problems."><meta itemprop=datePublished content="2019-08-19T00:00:00+00:00"><meta itemprop=dateModified content="2019-08-19T00:00:00+00:00"><meta itemprop=wordCount content="542"><meta itemprop=keywords content="Build,Pipelines,Azure DevOps,"><meta property="og:title" content="Meta-pipelines - Introduction"><meta property="og:description" content="Welcome. This series of articles will go in details of automating Azure Pipelines infrastructure itself. The text is accompanied by a source code repository &nbsp;  publicly available on GitHub.
Scenario and Problems Imagine yourself in the scenario of an independent team responsible of maintaining its own build pipeline. Typical solutions are:
 Grab a leftover desktop or server machine Ask the IT department for a virtual machine Buy a VM in the cloud Use the standard hosted agents provided by Azure Pipelines  These solutions share some common problems."><meta property="og:type" content="article"><meta property="og:url" content="http://blog.casavian.eu/2019/pipeline-your-pipeline/1-introduction/"><meta property="article:published_time" content="2019-08-19T00:00:00+00:00"><meta property="article:modified_time" content="2019-08-19T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Meta-pipelines - Introduction"><meta name=twitter:description content="Welcome. This series of articles will go in details of automating Azure Pipelines infrastructure itself. The text is accompanied by a source code repository &nbsp;  publicly available on GitHub.
Scenario and Problems Imagine yourself in the scenario of an independent team responsible of maintaining its own build pipeline. Typical solutions are:
 Grab a leftover desktop or server machine Ask the IT department for a virtual machine Buy a VM in the cloud Use the standard hosted agents provided by Azure Pipelines  These solutions share some common problems."><meta name=twitter:site content="@giulio_vian"><link rel=alternate href=/index.xml type=application/rss+xml title="Giulio Vian's Blog!"><link rel=stylesheet href=/css/vendor.min.95b0b4c4607aec507f0fc9d9c36a12a4613ccac06f9423caa43e265cb58eb5f90709388cc0fa166ac3ca836b4163e6d0569b8b86065d9cabdf223c5ea9a63b08.css integrity="sha512-lbC0xGB67FB/D8nZw2oSpGE8ysBvlCPKpD4mXLWOtfkHCTiMwPoWasPKg2tBY+bQVpuLhgZdnKvfIjxeqaY7CA=="><link href=http://blog.casavian.eu/css/cookieconsent.min.cd0d0b6e50ff01ff2f3a9a70d7cfb66a7c6cb9acf7a566325568be6d3bd31fc4.css rel=stylesheet type=text/css integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin=anonymous><script src=http://blog.casavian.eu/js/cookieconsent.min.e55842a856a6d829feca3c3ad736c136b6c7549e9247274f78aa296259e06e24.js integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin=anonymous async></script><script>window.addEventListener("load",function(){window.cookieconsent.initialise({"palette":{"popup":{"background":"#428bca","text":"#ffffff"},"button":{"background":"#f71559"}},"content":{"message":'This website uses cookies.',"dismiss":'Got it!',"link":'Learn more.',"href":"http:\/\/blog.casavian.eu\/page\/privacy-cookies-policy\/"},"position":"bottom-right"})});</script><body><nav class="navbar navbar-light bg-white navbar-expand-lg border-bottom"><div class=container><a class="navbar-brand text-primary" href=/>Giulio Vian's Blog!</a>
<button class="navbar-toggler collapsed" type=button data-toggle=collapse data-target=#navbarCollapse aria-controls=navbarCollapse aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="navbar-collapse collapse" id=navbarCollapse><ul class="navbar-nav mr-auto"><li class=nav-item><a class="nav-link text-primary" href=/index.html><i class="fas fa-home"></i>Home</a></li><li class=nav-item><a class="nav-link text-primary" href=/page/about/><i class="fa fa-info-circle"></i>About</a></li><li class=nav-item><a class="nav-link text-primary" href=/page/public-speaking><i class="fa fa-microphone"></i>Speaking</a></li></ul></div></div></nav><main role=main><div class="container mt-3 mb-3"><div class=card><div class=card-body><h1 class=card-title><a href=/2019/pipeline-your-pipeline/1-introduction/>Meta-pipelines - Introduction</a></h1><h6 class="card-subtitle mb-2 text-muted"><i class="fas fa-calendar-day"></i>&nbsp;19 Aug 2019 -
<i class="fas fa-user"></i>&nbsp;Giulio Vian
- <i class="fas fa-clock"></i>&nbsp;~3 Minutes</h6><p class=card-text><p>Welcome.
This series of articles will go in details of automating Azure Pipelines infrastructure itself.
The text is accompanied by a <a href=https://github.com/giuliov/pipeline-your-pipelines target=_blank rel="noopener noreferrer">source code repository
&nbsp;<i class="fab fa-github"></i></a> publicly available on GitHub.</p><h2 id=scenario-and-problems>Scenario and Problems</h2><p>Imagine yourself in the scenario of an independent team responsible of maintaining its own build pipeline.
Typical solutions are:</p><ol><li>Grab a leftover desktop or server machine</li><li>Ask the IT department for a virtual machine</li><li>Buy a VM in the cloud</li><li>Use the standard hosted agents provided by Azure Pipelines</li></ol><p>These solutions share some common problems.
What if we need to go back in time, five years from today and build an old version of software? Probably these machines are lost or they evolved and do not contain the same version of software.
Or maybe I need to use the latest and greatest for one build but have to run an older version of our toolchain to support laggard customers?</p><p>Another problem is build environment hysteresis: with this I mean the phenomenon where your build outcome may depend on the build server status. It maybe a requirement for incremental builds or a danger as the artefacts turn out unreliable.
The ability to completely scrap the build environment and start from clean from trusted sources minimises security risks that malicious code might be injected in your artefacts.</p><h2 id=elements-of-a-solution>Elements of a Solution</h2><p>Docker can solve the problem by guaranteeing a good degree of reproducibility: we can be very specific about the software we install and also keep any previously used image in a safe location. Using Docker volumes we will get full control on build state: keep it or clean it every time.</p><p>The plan is to dockerize Azure Pipelines Agents, so they can be quickly rebuilt and cheaply archived using a Registry. To run such agents we need some kind of hosts: we will see both using virtual machine-based hosts and Kubernetes, with consideration for on-premise and cloud scenarios.</p><p>While in this series I demonstrate the techniques using Azure, they can be used on-premise or translated for a different cloud provider.</p><h2 id=i-do-not-have-this-problem>I do not have this problem</h2><p>If you are not facing this scenario — whatever build agents the pipeline gives to you, satisfies your needs — you can still learn a lot about trendy technologies in a practical context. We will demonstrate:</p><ul><li>Azure Virtual Machines</li><li>Azure Kubernetes Service</li><li>Terraform</li><li>Docker</li><li>Kubernetes</li><li>Azure Pipelines & Azure DevOps</li></ul><p>working together in a orchestrated dance.
Another gain from this series is the DevOps perspective: looking to a problem globally, automate as a way of documenting processes, delivery changes at the click of a button, scalability and security built-in.</p><h2 id=table-of-contents>Table of Contents</h2><p>The plan for the series is the following:</p><p><a href=/2019/pipeline-your-pipeline/1-Introduction/>1. Introduction</a> (<em>this page</em>)<br><a href=/2019/pipeline-your-pipeline/2-Hosts/>2. Docker Hosts</a><br><a href=/2019/pipeline-your-pipeline/3-Dockerfile>3. Dockerize the agent</a><br><a href=/2019/pipeline-your-pipeline/4-Build_images>4. Build and Registry</a><br><a href=/2019/pipeline-your-pipeline/5-Deploy_images>5. Deploy and Run agent</a><br><a href=/2019/pipeline-your-pipeline/6-Deploy_hosts>6. Automating the Host Environments</a><br><a href=/2019/pipeline-your-pipeline/7-Kubernetes>7. Host agents in Kubernetes</a><br><a href=/2019/pipeline-your-pipeline/8-Deploy_clusters>8. Automating the Kubernetes Environments</a><br>9. Scaling Hosts<a href=/2019/pipeline-your-pipeline/9-Scaling_hosts></a> (<em>planned</em>)<br>10. Organising code and resources<a href=/2019/pipeline-your-pipeline/10-Organising_code></a> (<em>planned</em>)</p><p>You can go in sequential order or select a different path if you are not interested in managing the host machines, as depicted in the flowchart.</p><p><img src=/post/2019-pipeline-your-pipeline/images/toc.png alt="Reading paths"></p><h2 id=notes>Notes</h2><p>Diagrams were drawn using <a href=https://www.draw.io/ target=_blank rel="noopener noreferrer">draw.io
&nbsp;<i class="fas fa-external-link-alt"></i></a> and saved in the images folder as PNG files with embedded diagram.</p><p>Pull Requests are always welcome!</p></p></div><div class=card-footer><small class=text-muted><i class="fas fa-folder text-primary"></i>&nbsp;
<a href=/categories/#devops class="badge badge-primary"><span>DevOps</span></a><br><i class="fas fa-tags text-secondary"></i>&nbsp;
<a href=/tags/#build class="badge badge-secondary"><span>Build</span></a>
<a href=/tags/#pipelines class="badge badge-secondary"><span>Pipelines</span></a>
<a href=/tags/#azure-devops class="badge badge-secondary"><span>Azure DevOps</span></a></small></div></div></div></main><footer class="navbar-light border-top"><div class=container><div class=row><div class="col-12 col-md-3 mb-3"><h5>Giulio Vian's Blog!</h5>Notes and considerations of small venetian guy on DevOps tools, architecture, development and other paraphernalia.</div><div class="col-12 col-md-3 mb-3"><h5>Social</h5><ul class="list-unstyled list-inline"><li class=list-inline-item><a href=https://github.com/giuliov target=_blank rel="noopener noreferrer" title=GitHub class="fab fa-github fa-2x"></a></li><li class=list-inline-item><a href=https://stackoverflow.com/users/100864 target=_blank rel="noopener noreferrer" title="Stack Overflow" class="fab fa-stack-overflow fa-2x"></a></li><li class=list-inline-item><a href=https://medium.com/@giuliovdev target=_blank rel="noopener noreferrer" title=Medium class="fab fa-medium fa-2x"></a></li><li class=list-inline-item><a href=https://linkedin.com/in/giuliovian target=_blank rel="noopener noreferrer" title=LinkedIn class="fab fa-linkedin fa-2x"></a></li><li class=list-inline-item><a href=https://linkedin.com/company/unum-ireland-ltd-it target=_blank rel="noopener noreferrer" title="LinkedIn Company" class="fab fa-linkedin fa-2x"></a></li><li class=list-inline-item><a href=https://xing.com/profile/Giulio_Vian target=_blank rel="noopener noreferrer" title=Xing class="fab fa-xing fa-2x"></a></li><li class=list-inline-item><a href=https://slideshare.net/giuliov target=_blank rel="noopener noreferrer" title=SlideShare class="fab fa-slideshare fa-2x"></a></li><li class=list-inline-item><a href=https://youtube.com/UCZ-J6JRyvz6aaJ9zCN5wpxA target=_blank rel="noopener noreferrer" title=YouTube class="fab fa-youtube fa-2x"></a></li><li class=list-inline-item><a href=https://twitter.com/giulio_vian target=_blank rel="noopener noreferrer" title=Twitter class="fab fa-twitter fa-2x"></a></li><li class=list-inline-item><a href=mailto:giulio.dev@casavian.eu title=Email class="fas fa-envelope fa-2x"></a></li></ul></div><div class="col-12 col-md-3 mb-3"><h5>Site</h5><ul class=list-unstyled><li><a href=/about/><i class="fas fa-address-card"></i>About</a></li><li><a href=/categories/><i class="fas fa-folder"></i>Categories</a></li><li><a href=/tags/><i class="fas fa-tags"></i>Tags</a></li></ul></div><div class="col-12 col-md-3 mb-3">&copy; 2020 Giulio Vian<br>Theme by <a href=https://www.spech.de target=_blank rel="noopener noreferrer">Sebastian Pech</a>.</div></div></div></footer><script src=/js/vendor.min.0497fa926ed3dc2241b91e016467480841da9749a0f7c40ed3960c3c238745e5accb5ec5e07654668e11047bbf96f95083b88dd49a845781011aba42e4f00a5d.js integrity="sha512-BJf6km7T3CJBuR4BZGdICEHal0mg98QO05YMPCOHReWsy17F4HZUZo4RBHu/lvlQg7iN1JqEV4EBGrpC5PAKXQ=="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-46796059-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>